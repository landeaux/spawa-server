{"version":3,"sources":["webpack:///./src/views/Settings.vue?0022","webpack:///src/views/Settings.vue","webpack:///./src/views/Settings.vue?669e","webpack:///./src/views/Settings.vue","webpack:///./node_modules/core-js/modules/es.array.some.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","toastVariant","on","onToastDismissed","model","value","callback","$$v","showToast","expression","_s","toastMessage","ref","scopedSlots","_u","key","fn","handleSubmit","invalid","pristine","$event","preventDefault","onSubmit","form","$set","submitDisabled","staticRenderFns","name","components","ValidationObserver","TextInputWithValidation","data","computed","stateIsInit","state","INIT","stateIsSuccess","SUCCESS","fieldsHaveChanged","Object","keys","some","prototype","hasOwnProperty","call","created","hydrateForm","methods","generatePayload","payload","confirmPassword","forEach","field","initialForm","toastTimer","clearTimeout","component","$","$some","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgBC,MAAM,CAAC,GAAK,SAAS,CAACH,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,kCAAkC,CAACF,EAAG,KAAK,CAACE,YAAY,kBAAkB,CAACN,EAAIQ,GAAG,qBAAqBJ,EAAG,UAAU,CAACE,YAAY,iBAAiBC,MAAM,CAAC,QAAUP,EAAIS,aAAa,YAAc,GAAG,KAAO,IAAIC,GAAG,CAAC,UAAYV,EAAIW,kBAAkBC,MAAM,CAACC,MAAOb,EAAa,UAAEc,SAAS,SAAUC,GAAMf,EAAIgB,UAAUD,GAAKE,WAAW,cAAc,CAACjB,EAAIQ,GAAG,IAAIR,EAAIkB,GAAGlB,EAAImB,cAAc,OAAOf,EAAG,qBAAqB,CAACgB,IAAI,OAAOb,MAAM,CAAC,IAAM,OAAOc,YAAYrB,EAAIsB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASJ,GACpuB,IAAIK,EAAeL,EAAIK,aACnBC,EAAUN,EAAIM,QACdC,EAAWP,EAAIO,SACnB,MAAO,CAACvB,EAAG,OAAO,CAACM,GAAG,CAAC,OAAS,SAASkB,GAAgC,OAAxBA,EAAOC,iBAAwBJ,EAAazB,EAAI8B,aAAa,CAAC1B,EAAG,WAAW,CAACA,EAAG,0BAA0B,CAACG,MAAM,CAAC,GAAK,WAAW,MAAQ,WAAW,KAAO,OAAO,MAAQ,YAAY,SAAW,IAAIK,MAAM,CAACC,MAAOb,EAAI+B,KAAa,SAAEjB,SAAS,SAAUC,GAAMf,EAAIgC,KAAKhC,EAAI+B,KAAM,WAAYhB,IAAME,WAAW,mBAAmBb,EAAG,0BAA0B,CAACG,MAAM,CAAC,GAAK,QAAQ,MAAQ,QAAQ,KAAO,QAAQ,SAAW,IAAIK,MAAM,CAACC,MAAOb,EAAI+B,KAAU,MAAEjB,SAAS,SAAUC,GAAMf,EAAIgC,KAAKhC,EAAI+B,KAAM,QAAShB,IAAME,WAAW,gBAAgBb,EAAG,0BAA0B,CAACG,MAAM,CAAC,GAAK,UAAU,MAAQ,UAAU,KAAO,OAAO,SAAW,IAAIK,MAAM,CAACC,MAAOb,EAAI+B,KAAY,QAAEjB,SAAS,SAAUC,GAAMf,EAAIgC,KAAKhC,EAAI+B,KAAM,UAAWhB,IAAME,WAAW,kBAAkBb,EAAG,0BAA0B,CAACG,MAAM,CAAC,GAAK,WAAW,MAAQ,WAAW,MAAQ,6BAA6B,KAAO,WAAW,IAAM,YAAYK,MAAM,CAACC,MAAOb,EAAI+B,KAAa,SAAEjB,SAAS,SAAUC,GAAMf,EAAIgC,KAAKhC,EAAI+B,KAAM,WAAYhB,IAAME,WAAW,mBAAmBb,EAAG,0BAA0B,CAACG,MAAM,CAAC,GAAK,mBAAmB,MAAQ,mBAAmB,MAAQ,qBAAqB,KAAO,WAAW,IAAM,oBAAoBK,MAAM,CAACC,MAAOb,EAAI+B,KAAoB,gBAAEjB,SAAS,SAAUC,GAAMf,EAAIgC,KAAKhC,EAAI+B,KAAM,kBAAmBhB,IAAME,WAAW,0BAA0Bb,EAAG,WAAW,CAACG,MAAM,CAAC,SAAWP,EAAIiC,eAAeP,EAASC,GAAU,KAAO,SAAS,QAAU,YAAY,CAAC3B,EAAIQ,GAAG,wBAAwB,aAAa,UAC5/C0B,EAAkB,G,4HCStB,uBAFA,E,EAAA,WACA,E,EAAA,WAMA,SACA,YACA,UAKA,MAOA,GACEC,KAAM,cACNC,WAAY,CACVC,mBAAJ,OACIC,wBAAyB,WAA7B,yDAEEC,KAAM,WAAR,OACA,QACA,aACA,gBACA,MACA,YACA,SACA,WACA,YACA,oBAEA,iBAEEC,SAAU,OAAZ,OAAY,CAAZ,GACA,GACA,gBAFA,CAIIC,YAJJ,WAKM,OAAOxC,KAAKyC,QAAUC,GAExBC,eAPJ,WAQM,OAAO3C,KAAKyC,QAAUG,GAExB1B,aAVJ,WAWM,OAAIlB,KAAKwC,YAAoB,GACtBxC,KAAK2C,eAClB,mBACA,6CAEInC,aAhBJ,WAiBM,OAAOR,KAAK2C,eAClB,UACA,UAEIE,kBArBJ,WAqBA,WACM,OAAOC,OAAOC,KAAK/C,KAAK8B,MAAMkB,MAAK,SAAzC,GACQ,QAAIF,OAAOG,UAAUC,eAAeC,KAAK,EAAjD,gBACiB,EAAjB,iCAMEC,QAjDF,WAkDIpD,KAAKqD,eAEPC,QAAS,OAAX,OAAW,CAAX,GACA,GACI,WAAJ,SAFA,CASIC,gBATJ,WASA,WAEA,+BAiBM,cAdOC,EAAQC,gBAGfX,OAAOC,KAAKS,GAASE,SAAQ,SAAnC,GAEYZ,OAAOG,UAAUC,eAAeC,KAAK,EAAjD,gBAEcK,EAAQG,KAAW,EAAjC,uBAEmBH,EAAQG,MAKdH,GAETH,YA9BJ,WA8BA,WACMP,OAAOC,KAAK/C,KAAK8B,MAAM4B,SAAQ,SAArC,GACYZ,OAAOG,UAAUC,eAAeC,KAAK,EAAjD,iBACU,EAAV,6BAGMnD,KAAK4D,YAAc,OAAzB,OAAyB,CAAzB,eAEI5B,eAtCJ,SAsCA,KACM,OAAOP,GAAWC,IAAa1B,KAAK6C,mBAEtC,SAzCJ,WAyCA,qKACA,sBADA,kBAGA,gBAHA,OAIA,UACA,gBALA,mDAOA,UAPA,QASA,eACA,oCACA,iBACA,GAZA,4DAcInC,iBAvDJ,WAwDUV,KAAK6D,aACPC,aAAa9D,KAAK6D,YAClB7D,KAAK6D,WAAa,UC/IwT,I,YCO9UE,EAAY,eACd,EACAjE,EACAmC,GACA,EACA,KACA,KACA,MAIa,aAAA8B,E,6CCjBf,IAAIC,EAAI,EAAQ,QACZC,EAAQ,EAAQ,QAAgCjB,KAChDkB,EAAsB,EAAQ,QAC9BC,EAA0B,EAAQ,QAElCC,EAAgBF,EAAoB,QACpCG,EAAiBF,EAAwB,QAI7CH,EAAE,CAAEM,OAAQ,QAASC,OAAO,EAAMC,QAASJ,IAAkBC,GAAkB,CAC7ErB,KAAM,SAAcyB,GAClB,OAAOR,EAAMjE,KAAMyE,EAAYC,UAAUC,OAAS,EAAID,UAAU,QAAKE","file":"js/chunk-f981aa18.c08fcc88.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"settings-page\",attrs:{\"id\":\"view\"}},[_c('div',{staticClass:\"container page\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6 offset-md-3 col-xs-12\"},[_c('h1',{staticClass:\"text-xs-center\"},[_vm._v(\" Your Settings \")]),_c('b-alert',{staticClass:\"mb-3 rounded-1\",attrs:{\"variant\":_vm.toastVariant,\"dismissible\":\"\",\"fade\":\"\"},on:{\"dismissed\":_vm.onToastDismissed},model:{value:(_vm.showToast),callback:function ($$v) {_vm.showToast=$$v},expression:\"showToast\"}},[_vm._v(\" \"+_vm._s(_vm.toastMessage)+\" \")]),_c('ValidationObserver',{ref:\"form\",attrs:{\"tag\":\"div\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nvar invalid = ref.invalid;\nvar pristine = ref.pristine;\nreturn [_c('form',{on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.onSubmit)}}},[_c('fieldset',[_c('TextInputWithValidation',{attrs:{\"id\":\"username\",\"label\":\"Username\",\"type\":\"text\",\"rules\":\"alpha_num\",\"required\":\"\"},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}}),_c('TextInputWithValidation',{attrs:{\"id\":\"email\",\"label\":\"Email\",\"type\":\"email\",\"required\":\"\"},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}}),_c('TextInputWithValidation',{attrs:{\"id\":\"company\",\"label\":\"Company\",\"type\":\"text\",\"required\":\"\"},model:{value:(_vm.form.company),callback:function ($$v) {_vm.$set(_vm.form, \"company\", $$v)},expression:\"form.company\"}}),_c('TextInputWithValidation',{attrs:{\"id\":\"password\",\"label\":\"Password\",\"rules\":\"password:@confirm-password\",\"type\":\"password\",\"vid\":\"password\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}}),_c('TextInputWithValidation',{attrs:{\"id\":\"confirm-password\",\"label\":\"Confirm Password\",\"rules\":\"password:@password\",\"type\":\"password\",\"vid\":\"confirm-password\"},model:{value:(_vm.form.confirmPassword),callback:function ($$v) {_vm.$set(_vm.form, \"confirmPassword\", $$v)},expression:\"form.confirmPassword\"}}),_c('b-button',{attrs:{\"disabled\":_vm.submitDisabled(invalid, pristine),\"type\":\"submit\",\"variant\":\"primary\"}},[_vm._v(\" Update Settings \")])],1)])]}}])})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport {\n  createNamespacedHelpers,\n} from 'vuex';\nimport {\n  UPDATE_USER,\n} from '@/store/actions.type';\nimport {\n  ValidationObserver,\n} from 'vee-validate';\n\nconst {\n  mapActions,\n  mapGetters,\n} = createNamespacedHelpers('auth');\n\n/**\n * component states\n */\nconst INIT = 'INIT';\nconst SUCCESS = 'SUCCESS';\nconst ERROR = 'ERROR';\n\n/**\n * other constants\n */\nconst TOAST_TIMEOUT = 10000; // timeout in ms\n\n/**\n * TheSettings\n *\n * The Settings view.\n */\nexport default {\n  name: 'TheSettings',\n  components: {\n    ValidationObserver,\n    TextInputWithValidation: () => import('@/components/TextInputWithValidation'),\n  },\n  data: () => ({\n    state: INIT,\n    showToast: false,\n    toastTimer: null,\n    form: {\n      username: '',\n      email: '',\n      company: '',\n      password: '',\n      confirmPassword: '',\n    },\n    initialForm: {},\n  }),\n  computed: {\n    ...mapGetters([\n      'currentUser',\n    ]),\n    stateIsInit () {\n      return this.state === INIT;\n    },\n    stateIsSuccess () {\n      return this.state === SUCCESS;\n    },\n    toastMessage () {\n      if (this.stateIsInit) return '';\n      return this.stateIsSuccess\n        ? 'Profile Updated!'\n        : 'There was an error updating your profile.';\n    },\n    toastVariant () {\n      return this.stateIsSuccess\n        ? 'success'\n        : 'danger';\n    },\n    fieldsHaveChanged () {\n      return Object.keys(this.form).some((field) => {\n        if (Object.prototype.hasOwnProperty.call(this.initialForm, field)) {\n          return this.form[field] !== this.initialForm[field];\n        }\n        return false;\n      });\n    },\n  },\n  created () {\n    this.hydrateForm();\n  },\n  methods: {\n    ...mapActions({\n      updateUser: UPDATE_USER,\n    }),\n    /**\n     * Generates a payload object of the fields to update for the user by\n     * copying the form values and deleting those fields which have not changed\n     * from the original values.\n     */\n    generatePayload () {\n      // make a copy of the form for moulding into the payload\n      const payload = { ...this.form };\n\n      // delete the confirm password field as we don't need to save it\n      delete payload.confirmPassword;\n\n      // for each field on the payload\n      Object.keys(payload).forEach((field) => {\n        // check if initialForm has a matching field with the payload\n        if (Object.prototype.hasOwnProperty.call(this.initialForm, field)) {\n          // if field hasn't changed from initial value\n          if (payload[field] === this.initialForm[field]) {\n            // then let's get rid of it\n            delete payload[field];\n          }\n        }\n      });\n\n      return payload;\n    },\n    hydrateForm () {\n      Object.keys(this.form).forEach((key) => {\n        if (Object.prototype.hasOwnProperty.call(this.currentUser, key)) {\n          this.form[key] = this.currentUser[key];\n        }\n      });\n      this.initialForm = { ...this.form };\n    },\n    submitDisabled (invalid, pristine) {\n      return invalid || pristine || !this.fieldsHaveChanged;\n    },\n    async onSubmit () {\n      const payload = this.generatePayload();\n      try {\n        await this.updateUser(payload);\n        this.state = SUCCESS;\n        this.hydrateForm();\n      } catch (error) {\n        this.state = ERROR;\n      }\n      this.showToast = true;\n      this.toastTimer = setTimeout(() => {\n        this.showToast = false;\n      }, TOAST_TIMEOUT);\n    },\n    onToastDismissed () {\n      if (this.toastTimer) {\n        clearTimeout(this.toastTimer);\n        this.toastTimer = null;\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <div\n    id=\"view\"\n    class=\"settings-page\"\n  >\n    <div class=\"container page\">\n      <div class=\"row\">\n        <div class=\"col-md-6 offset-md-3 col-xs-12\">\n          <h1 class=\"text-xs-center\">\n            Your Settings\n          </h1>\n          <b-alert\n            v-model=\"showToast\"\n            class=\"mb-3 rounded-1\"\n            :variant=\"toastVariant\"\n            dismissible\n            fade\n            @dismissed=\"onToastDismissed\"\n          >\n            {{ toastMessage }}\n          </b-alert>\n          <ValidationObserver\n            ref=\"form\"\n            v-slot=\"{ handleSubmit, invalid, pristine }\"\n            tag=\"div\"\n          >\n            <form @submit.prevent=\"handleSubmit(onSubmit)\">\n              <fieldset>\n                <TextInputWithValidation\n                  id=\"username\"\n                  v-model=\"form.username\"\n                  label=\"Username\"\n                  type=\"text\"\n                  rules=\"alpha_num\"\n                  required\n                />\n                <TextInputWithValidation\n                  id=\"email\"\n                  v-model=\"form.email\"\n                  label=\"Email\"\n                  type=\"email\"\n                  required\n                />\n                <TextInputWithValidation\n                  id=\"company\"\n                  v-model=\"form.company\"\n                  label=\"Company\"\n                  type=\"text\"\n                  required\n                />\n                <TextInputWithValidation\n                  id=\"password\"\n                  v-model=\"form.password\"\n                  label=\"Password\"\n                  rules=\"password:@confirm-password\"\n                  type=\"password\"\n                  vid=\"password\"\n                />\n                <TextInputWithValidation\n                  id=\"confirm-password\"\n                  v-model=\"form.confirmPassword\"\n                  label=\"Confirm Password\"\n                  rules=\"password:@password\"\n                  type=\"password\"\n                  vid=\"confirm-password\"\n                />\n                <b-button\n                  :disabled=\"submitDisabled(invalid, pristine)\"\n                  type=\"submit\"\n                  variant=\"primary\"\n                >\n                  Update Settings\n                </b-button>\n              </fieldset>\n            </form>\n          </ValidationObserver>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=6183914a&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $some = require('../internals/array-iteration').some;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('some');\n\n// `Array.prototype.some` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}