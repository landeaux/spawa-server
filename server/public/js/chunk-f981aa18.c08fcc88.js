(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f981aa18"],{"26d3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"settings-page",attrs:{id:"view"}},[s("div",{staticClass:"container page"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 offset-md-3 col-xs-12"},[s("h1",{staticClass:"text-xs-center"},[t._v(" Your Settings ")]),s("b-alert",{staticClass:"mb-3 rounded-1",attrs:{variant:t.toastVariant,dismissible:"",fade:""},on:{dismissed:t.onToastDismissed},model:{value:t.showToast,callback:function(e){t.showToast=e},expression:"showToast"}},[t._v(" "+t._s(t.toastMessage)+" ")]),s("ValidationObserver",{ref:"form",attrs:{tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit,r=e.invalid,o=e.pristine;return[s("form",{on:{submit:function(e){return e.preventDefault(),a(t.onSubmit)}}},[s("fieldset",[s("TextInputWithValidation",{attrs:{id:"username",label:"Username",type:"text",rules:"alpha_num",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),s("TextInputWithValidation",{attrs:{id:"email",label:"Email",type:"email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),s("TextInputWithValidation",{attrs:{id:"company",label:"Company",type:"text",required:""},model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}}),s("TextInputWithValidation",{attrs:{id:"password",label:"Password",rules:"password:@confirm-password",type:"password",vid:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),s("TextInputWithValidation",{attrs:{id:"confirm-password",label:"Confirm Password",rules:"password:@password",type:"password",vid:"confirm-password"},model:{value:t.form.confirmPassword,callback:function(e){t.$set(t.form,"confirmPassword",e)},expression:"form.confirmPassword"}}),s("b-button",{attrs:{disabled:t.submitDisabled(r,o),type:"submit",variant:"primary"}},[t._v(" Update Settings ")])],1)])]}}])})],1)])])])},r=[],o=(s("4160"),s("45fc"),s("b64b"),s("d3b7"),s("159b"),s("96cf"),s("1da1")),i=s("5530"),n=s("2f62"),c=s("6c33"),u=s("7bb1"),l=Object(n["a"])("auth"),m=l.mapActions,d=l.mapGetters,f="INIT",p="SUCCESS",h="ERROR",b=1e4,w={name:"TheSettings",components:{ValidationObserver:u["a"],TextInputWithValidation:function(){return s.e("chunk-4b2d9a2f").then(s.bind(null,"43a9"))}},data:function(){return{state:f,showToast:!1,toastTimer:null,form:{username:"",email:"",company:"",password:"",confirmPassword:""},initialForm:{}}},computed:Object(i["a"])({},d(["currentUser"]),{stateIsInit:function(){return this.state===f},stateIsSuccess:function(){return this.state===p},toastMessage:function(){return this.stateIsInit?"":this.stateIsSuccess?"Profile Updated!":"There was an error updating your profile."},toastVariant:function(){return this.stateIsSuccess?"success":"danger"},fieldsHaveChanged:function(){var t=this;return Object.keys(this.form).some((function(e){return!!Object.prototype.hasOwnProperty.call(t.initialForm,e)&&t.form[e]!==t.initialForm[e]}))}}),created:function(){this.hydrateForm()},methods:Object(i["a"])({},m({updateUser:c["z"]}),{generatePayload:function(){var t=this,e=Object(i["a"])({},this.form);return delete e.confirmPassword,Object.keys(e).forEach((function(s){Object.prototype.hasOwnProperty.call(t.initialForm,s)&&e[s]===t.initialForm[s]&&delete e[s]})),e},hydrateForm:function(){var t=this;Object.keys(this.form).forEach((function(e){Object.prototype.hasOwnProperty.call(t.currentUser,e)&&(t.form[e]=t.currentUser[e])})),this.initialForm=Object(i["a"])({},this.form)},submitDisabled:function(t,e){return t||e||!this.fieldsHaveChanged},onSubmit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.generatePayload(),e.prev=1,e.next=4,t.updateUser(s);case 4:t.state=p,t.hydrateForm(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),t.state=h;case 11:t.showToast=!0,t.toastTimer=setTimeout((function(){t.showToast=!1}),b);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))()},onToastDismissed:function(){this.toastTimer&&(clearTimeout(this.toastTimer),this.toastTimer=null)}})},v=w,y=s("2877"),T=Object(y["a"])(v,a,r,!1,null,null,null);e["default"]=T.exports},"45fc":function(t,e,s){"use strict";var a=s("23e7"),r=s("b727").some,o=s("a640"),i=s("ae40"),n=o("some"),c=i("some");a({target:"Array",proto:!0,forced:!n||!c},{some:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-f981aa18.c08fcc88.js.map